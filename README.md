# üì° Megafon SQL Database Project

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –º–æ–¥–µ–ª–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –º–æ–±–∏–ª—å–Ω–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ ¬´–ú–µ–≥–∞—Ñ–æ–Ω¬ª. –í –±–∞–∑–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏, —Ç–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã, –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ª–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏, —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏.

## üì¶ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ

- `megafon_project.sql` ‚Äî –¥–∞–º–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL
- `README.md` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

## üß± –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 4 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü:

### üßç‚Äç‚ôÇÔ∏è users

- `id` ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- `first_name`, `last_name`, `middle_name` ‚Äî –§–ò–û (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã)
- `phone_number` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä (—Ç–æ–ª—å–∫–æ 9 —Ü–∏—Ñ—Ä)
- `balance` ‚Äî —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å
- `tarif_id` ‚Äî —Å–≤—è–∑—å —Å —Ç–∞—Ä–∏—Ñ–æ–º
- `passport_id` ‚Äî —Å–≤—è–∑—å —Å —Ç–∞–±–ª–∏—Ü–µ–π –ø–∞—Å–ø–æ—Ä—Ç–æ–≤

### üìÉ passports

- `id` ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- `first_name`, `last_name`, `middle_name` ‚Äî –∏–º–µ–Ω–∞ (—Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã)
- `gender` ‚Äî —Ç–æ–ª—å–∫–æ `male` –∏–ª–∏ `female`
- `birth_date` ‚Äî –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
- `country` ‚Äî —Å—Ç—Ä–∞–Ω–∞

### üíº employees

- `id` ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- `f_name`, `l_name`, `m_name` ‚Äî –∏–º–µ–Ω–∞ (—Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã)
- `permission_level` ‚Äî —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞
- `passport_id` ‚Äî —Å–≤—è–∑—å —Å –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### üì± tarifs

- `id` ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- `megabytes` ‚Äî –æ–±—ä—ë–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- `minutes` ‚Äî –º–∏–Ω—É—Ç—ã
- `night_bezlimit` ‚Äî –±–µ–∑–ª–∏–º–∏—Ç –Ω–æ—á—å—é
- `price` ‚Äî —Ü–µ–Ω–∞ —Ç–∞—Ä–∏—Ñ–∞

## üîê –í–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ò–º–µ–Ω–∞: —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã (–ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `CHECK`)
- `phone_number`: —Ç–æ–ª—å–∫–æ 9 —Ü–∏—Ñ—Ä, `UNIQUE`
- `gender`: —Ç–æ–ª—å–∫–æ `'male'` –∏–ª–∏ `'female'`
- `middle_name`: –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è `NULL` –∏–ª–∏ –±—É–∫–≤—ã
- `passport_id`: `FOREIGN KEY` –∏–∑ `users` –∏ `employees`

## üõ† –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

```sql
-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
SELECT add_user('Ivan', 'Ivanov', '123456789', 500, 1, 1);

-- –°–º–µ–Ω–∞ —Ç–∞—Ä–∏—Ñ–∞
SELECT change_tarif(3, 2);  -- —Å–º–µ–Ω–∏—Ç—å —Ç–∞—Ä–∏—Ñ —É user —Å id=3 –Ω–∞ —Ç–∞—Ä–∏—Ñ —Å id=2
```

## üìä –ü—Ä–∏–º–µ—Ä—ã SQL-–∑–∞–ø—Ä–æ—Å–æ–≤

```sql
-- –ù–∞–π—Ç–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –±–∞–ª–∞–Ω—Å–æ–º –≤—ã—à–µ 100
SELECT * FROM users WHERE balance > 100;

-- –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∏—Ö —Ç–∞—Ä–∏—Ñ–∞–º–∏
SELECT u.first_name, t.megabytes, t.minutes
FROM users u
JOIN tarifs t ON u.tarif_id = t.id;

-- –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å —É—Ä–æ–≤–Ω–µ–º –¥–æ—Å—Ç—É–ø–∞ > 5
SELECT * FROM employees WHERE permission_level > 5;
```

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
psql -U postgres -d megafon_db < megafon_project.sql
```

## üß† –ù–∞–≤—ã–∫–∏, –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ

- –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å –Ω—É–ª—è
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, —Å–≤—è–∑–∏ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
- SQL-—Ñ—É–Ω–∫—Ü–∏–∏, CHECK, UNIQUE, FOREIGN KEY
- –ü—Ä–∞–∫—Ç–∏–∫–∞ INSERT, UPDATE, SELECT, JOIN
- –†–∞–±–æ—Ç–∞ —Å PostgreSQL –∫–∞–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

## üìç –ó–∞—á–µ–º —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç

–ü—Ä–æ–µ–∫—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ:
- –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ë–î,
- –Ω–∞–ø–∏—Å–∞–Ω–∏—è SQL-–∑–∞–ø—Ä–æ—Å–æ–≤,
- –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —É–¥–æ–±–Ω–æ–π –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

## üë§ –ê–≤—Ç–æ—Ä

Unkind ‚Äî –Ω–∞—á–∏–Ω–∞—é—â–∏–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —Å —É–≤–µ—Ä–µ–Ω–Ω—ã–º –≤–ª–∞–¥–µ–Ω–∏–µ–º SQL –∏ PostgreSQL.
GitHub: [Unkind](https://github.com/Unkind)
